# uAPI модуля «Блог»

- [Материалы](#module-blog-entry)
- [Категории](#module-blog-category)
- [Комментарии](#module-blog-comments)
- [Настройки полей](#module-blog-fields)

<a name="module-blog-entry"></a>
### Материалы

#### [GET] Все материалы модуля

> Обязательные параметры: отсутствуют

Особенности:

1. Чтобы получить данные материалов со страницы 2, достаточно добавить к URL параметр `&page=N` (где `N` – номер страницы)
1. Сколько материалов будет выдано за запрос – зависит от настроек модуля (Панель управления -> Блог -> Настройки модуля -> Количество материалов на главной странице).

Пример запроса:

    $response = $request->get('/blog', array(
        // без параметров
    ));

    // для особенности 1
    $response = $request->get('/blog', array(
        'page' => '2'
    ));

Пример ответа:

    {
       "page":1,
       "pages_list":"1..32",
       "per_page":"1",
       "blogs":[
          {
             "other3":"",
             "reads":20,
             "other5":"",
             "avatar":"",
             "other1":"",
             "rate_num":0,
             "author":"Dmitry_DM",
             "comments":"yes",
             "rating":"0.00",
             "add_date":"2016-03-26 16:23",
             "rate_sum":0,
             "category":{
                "url":"http://yoursite.ucoz.ru/category/hello",
                "name":"Категория",
                "id":1,
                "description":"39_e"
             },
             "id":"61",
             "ontop":"no",
             "other4":"",
             "other2":"",
             "pending":"no",
             "entry_url":"http://yoursite.ucoz.ru/blog/test/2016-03-26-61",
             "message":"Текст",
             "title":"тест",
             "hgu_title":"test",
             "meta_title":"Название материала",
             "meta_description":"Описание материала",
             "meta_keywords":"ключ1, ключ2, ключ3"
          }, {
          //второй материал
          }, {
          //третий материал
          }
       ],
       "total_blog":32
    }

Расшифровка переменных:

- `page` – [Число] – Номер текущей страницы
- `pages_list` – [Число] – Общее количество страниц в модуле
- `per_page` – [Число] – Количество материалов на страницу
- `blogs` – [Массив] – **Первый полученный материал**
    - `reads` – [Число] – Количество просмотров материала
    - `rate_num` – [Число] – Количество голосов (рейтинг)
    - `author` – [Строка] – Полное имя автора материала
    - `comments` – [Строка] – Позволить оставлять комментарии? (yes/no)
    - `rating` – [Число] – Рейтинг материала (Общая сумма рейтинга/на количество голосов)
    - `add_date` – [Строка] – Время добавления материала
    - `rate_sum` – [Число] – Общая сумма рейтинга
    - `category` – [Массив] – О категории материала
        - `url` – [Строка] – Ссылка на категорию материала
        - `access2add` – [Массив] – Права на добавление материалов в категорию
        - `name` – [Строка] – Название категории материала
        - `id` – [Число] – ID категории материала
        - `description` – [Строка] – Описание категории материала
    - `id` – [Число] – ID полученного материала
    - `ontop` – [Строка] – Показывать материал всегда сверху? (yes/no)
    - `pending` – [Строка] – В ожидани ли активации материал? (yes/no)
    - `entry_url` – [Строка] – Полная ссылка на материал
    - `message` – [Строка] – Краткое описание материала
    - `description` – [Строка] – Краткое описание материала [если включено краткое описание]
    - `title` – [Строка] – Название материала
    - `hgu_title` – [Строка] – ЧПУ материала
    - `meta_title` - [Строка] - Meta Title
    - `meta_description` - [Строка] - Meta Description
    - `meta_keywords` - [Строка] - Meta Keywords
    - `other1` – [Строка] – Дополнительное поле 1
    - `other2` – [Строка] – Дополнительное поле 2
    - `other3` – [Строка] – Дополнительное поле 3
    - `other4` – [Строка] – Дополнительное поле 4
    - `other5` – [Строка] – Дополнительное поле 5
- `total_blog` – [Число] – Общее количество материалов в модуле

#### [GET] определенный материал

> Обязательный параметр: `id` (айди материала)

Особенности:

1. В переменных `description` и `message` переносы строк автоматически меняются на `\n` (в случае, если перенос строки был сделан без html-тега `<br />`)
1. В переменных `description` и `message` если там есть html-тег переноса `<br />` – будет осуществлен и визуальный перенос строки, без вывода `<br />` (то есть html-тег воспроизведется)
1. Переменные `access2category` и `access2add` могут иметь другой вид, если права установлены для всех групп пользователей
1. Если материал входит в более 1 категории, то о каждой категории, в которые входит материал, будет показана информация в GET-запросе

Пример запроса:

    $response = $request->get('/blog', array(
        'id' => 'АЙДИМАТЕРИАЛА'
    ));

Пример ответа:

    {
         "other3":"",
         "reads":20,
         "other5":"",
         "avatar":"",
         "other1":"",
         "rate_num":0,
         "author":"Dmitry_DM",
         "comments":"yes",
         "rating":"0.00",
         "add_date":"2016-03-26 16:23",
         "rate_sum":0,
         "category":{
            "url":"http://yoursite.ucoz.ru/category/hello",
            "name":"Категория",
            "id":1,
            "description":"39_e"
         },
         "id":"61",
         "ontop":"no",
         "other4":"",
         "other2":"",
         "pending":"no",
         "entry_url":"http://yoursite.ucoz.ru/blog/test/2016-03-26-61",
         "message":"Текст",
         "title":"тест",
         "hgu_title":"test",
         "meta_title":"Название материала",
         "meta_description":"Описание материала",
         "meta_keywords":"ключ1, ключ2, ключ3"
      }

Расшифровка переменных:

- `reads` – [Число] – Количество просмотров материала
- `rate_num` – [Число] – Количество голосов (рейтинг)
- `author` – [Строка] – Полное имя автора материала
- `comments` – [Строка] – Позволить оставлять комментарии? (yes/no)
- `rating` – [Число] – Рейтинг материала (Общая сумма рейтинга/на количество голосов)
- `add_date` – [Строка] – Время добавления материала
- `rate_sum` – [Число] – Общая сумма рейтинга
- `category` – [Массив] – **О категории материала**
    - `url` – [Строка] – Ссылка на категорию материала
    - `access2add` – [Массив] – Права на добавление материалов в категорию
    - `name` – [Строка] – Название категории материала
    - `id` – [Число] – ID категории материала
    - `description` – [Строка] – Описание категории материала
- `id` – [Число] – ID полученного материала
- `ontop` – [Строка] – Показывать материал всегда сверху? (yes/no)
- `pending` – [Строка] – В ожидани ли активации материал? (yes/no)
- `entry_url` – [Строка] – Полная ссылка на материал
- `message` – [Строка] – Полное описание материала
- `description` – [Строка] – Краткое описание материала [если включено краткое описание]
- `title` – [Строка] – Название материала
- `hgu_title` – [Строка] – ЧПУ материала
- `meta_title` - [Строка] - Meta Title
- `meta_description` - [Строка] - Meta Description
- `meta_keywords` - [Строка] - Meta Keywords
- `other1` – [Строка] – Дополнительное поле 1
- `other2` – [Строка] – Дополнительное поле 2
- `other3` – [Строка] – Дополнительное поле 3
- `other4` – [Строка] – Дополнительное поле 4
- `other5` – [Строка] – Дополнительное поле 5

#### [GET] За определенную дату

> Обязательные параметры: `date` (год-месяц-день)

Особенности:

1. Формат `yyyy-mm-dd` подразумевает расшифровку Год-Месяц-День
1. Если нужны материалы за определенный год, то достаточно сделать запрос с параметром `'date' => '2015'`, например

Пример запроса:

    $response = $request->get('/blog', array(
        'date' => '2016-03-26' // формат `yyyy-mm-dd`
    ));

Пример ответа:

    {
       "page":1,
       "pages_list":"1",
       "per_page":"5",
       "blogs":[
          {
             "other3":"",
             "reads":20,
             "other5":"",
             "avatar":"",
             "other1":"",
             "rate_num":0,
             "author":"Dmitry_DM",
             "comments":"yes",
             "rating":"0.00",
             "add_date":"2016-03-26 16:23",
             "rate_sum":0,
             "category":{
                "url":"http://yoursite.ucoz.ru/category/hello",
                "name":"Категория",
                "id":1,
                "description":"39_e"
             },
             "id":"61",
             "ontop":"no",
             "other4":"",
             "other2":"",
             "pending":"no",
             "entry_url":"http://yoursite.ucoz.ru/blog/test/2016-03-26-61",
             "message":"Текст",
             "title":"тест",
             "hgu_title":"test",
             "meta_title":"Название материала",
             "meta_description":"Описание материала",
             "meta_keywords":"ключ1, ключ2, ключ3"
          }, {
              //второй материал
          }, {
              //третий материал
          }
       ],
       "total_blog":3
    }

Расшифровка переменных:

- `page` – [Число] – Номер текущей страницы
- `pages_list` – [Число] – Общее количество страниц в модуле
- `per_page` – [Число] – Количество материалов на страницу
- `blogs` – [Массив] – **Первый полученный материал**
    - `reads` – [Число] – Количество просмотров материала
    - `rate_num` – [Число] – Количество голосов (рейтинг)
    - `author` – [Строка] – Полное имя автора материала
    - `comments` – [Строка] – Позволить оставлять комментарии? (yes/no)
    - `rating` – [Число] – Рейтинг материала (Общая сумма рейтинга/на количество голосов)
    - `add_date` – [Строка] – Время добавления материала
    - `rate_sum` – [Число] – Общая сумма рейтинга
    - `category` – [Массив] – **О категории материала**
        - `url` – [Строка] – Ссылка на категорию материала
        - `access2add` – [Массив] – Права на добавление материалов в категорию
        - `name` – [Строка] – Название категории материала
        - `id` – [Число] – ID категории материала
        - `description` – [Строка] – Описание категории материала
    - `id` – [Число] – ID полученного материала
    - `ontop` – [Строка] – Показывать материал всегда сверху? (yes/no)
    - `pending` – [Строка] – В ожидани ли активации материал? (yes/no)
    - `entry_url` – [Строка] – Полная ссылка на материал
    - `message` – [Строка] – Полное описание материала
    - `description` – [Строка] – Краткое описание материала [если включено краткое описание]
    - `title` – [Строка] – Название материала
    - `hgu_title` – [Строка] – ЧПУ материала
    - `meta_title` - [Строка] - Meta Title
    - `meta_description` - [Строка] - Meta Description
    - `meta_keywords` - [Строка] - Meta Keywords
    - `other1` – [Строка] – Дополнительное поле 1
    - `other2` – [Строка] – Дополнительное поле 2
    - `other3` – [Строка] – Дополнительное поле 3
    - `other4` – [Строка] – Дополнительное поле 4
    - `other5` – [Строка] – Дополнительное поле 5
- `total_blog` – [Число] – Общее количество материалов в модуле

#### [POST] Добавить материал

> Обязательные параметры: зависит от настроек модуля

Особенности:

1. HGU (ЧПУ) нельзя установить при добавлении материала
1. Все обязательные параметры исключительно определяются в Панели управления: Блог -> Настройки модуля

Пример запроса:

    $response = $request->post('/blog', array(
        'category' => '1',
        'title' => 'Название материала',
        'description' => 'Краткое описание материала',
        'message' => 'Полное описание материала'
    ));

Пример ответа:

    {
       "end2br_msg":"no",
       "comments":"yes",
       "add_date":"2014-11-25 23:34",
       "end2br_desc":"no",
       "ontop":"no",
       "includehtml_desc":"yes",
       "subscribe":"no",
       "pending":"no",
       "description":"Краткое описание материала",
       "message":"Полное описание материала",
       "who_add":"uapitest003",
       "title":"Название материала",
       "includehtml_msg":"yes",
       "hgu_title":"nazvanie_materiala",
       "meta_title":"Название материала",
       "meta_description":"Описание материала",
       "meta_keywords":"ключ1, ключ2, ключ3"
    }

Расшифровка переменных:

- `end2br_msg` – [Строка] – Статус опции «Заменять теги переноса на `<br />`» для полного описания материала (yes/no)
- `comments` – [Строка] – Позволить оставлять комментарии? (yes/no)
- `add_date` – [Строка] – Время добавления материала
- `end2br_desc` – [Строка] – Статус опции «Заменять теги переноса на `<br />`» для краткого описания материала (yes/no)
- `ontop` – [Строка] – Показывать материал всегда сверху? (yes/no)
- `pending` – [Строка] – В ожидани ли активации материал? (yes/no)
- `description` – [Строка] – Краткое описание материала
- `message` – [Строка] – Полное описание материала
- `title` – [Строка] – Название материала
- `hgu_title` – [Строка] – ЧПУ материала
- `file1` – [Файл] – Изображение материала (`file2`, `file3`..`file20`)
- `other1` – [Строка] – Дополнительное поле 1
- `other2` – [Строка] – Дополнительное поле 2
- `other3` – [Строка] – Дополнительное поле 3
- `other4` – [Строка] – Дополнительное поле 4
- `other5` – [Строка] – Дополнительное поле 5
- `meta_title` - [Строка] - Meta Title
- `meta_description` - [Строка] - Meta Description
- `meta_keywords` - [Строка] - Meta Keywords

#### [POST] Добавить тег к материалу

> Обязательные параметры: `id` материала

Обратите внимание, что именно таким образом (с помощью POST-запроса) осуществляется добавление, редактирование и удаление тегов к материалу.

1. Если вам требуется удалить теги, достаточно отправить пустой запрос.
1. Если вам требуется отредактировать теги, сделайте полный запрос с теми тегами, которые должны остаться.
1. Если требуется добавить новые теги, необходимо ввести список существующих + новые теги.

Теги необходимо перечислять через запятую.

Ответ сервера не предполагает возврата данных о материале – только сообщение об операции.

Пример запроса:

    $response = $request->post('/blog/tags', array(
        'id' => '1',
        'tags' => 'тег1,тест2',
    ));

Пример ответа:

    {
       "success":{
          "msg":"Данные по тегам материала обновлены"
       }
    }

#### [PUT] Отредактировать материал

> Обязательные параметры: `id` материала

Особенности:

1. Если отсылается запрос с пустым параметром – то это означает удаление значения параметра.
1. Если при запросе вы не указали какой-либо параметр – он останется со своим прежним значением.

Пример запроса:

    $response = $request->put('/blog', array(
        'id' => '188',
        'title' => 'Новое название материала',
        'description' => 'Новое краткое описание материала',
        'message' => 'Новое полное описание материала',
        'author_site' => 'Новый веб-сайт автора',
        'author_email' => 'Новый email автора',
        'author' => 'Новое имя автора',
        'link2source' => 'Новый источник материала',
        'meta_title':'Название материала',
        'meta_description':'Описание материала',
        'meta_keywords':'ключ1, ключ2, ключ3'
    ));

Пример ответа:

    {
       "other3":"",
       "end2br_msg":"no",
       "other5":"",
       "other1":"",
       "comments":"yes",
       "show_attach":"no",
       "end2br_desc":"no",
       "id":61,
       "category":{
          "url":"http://yoursite.ucoz.ru/category/hello",
          "name":"Категория",
          "id":1,
          "description":"39_e"
       },
       "other4":"",
       "ontop":"no",
       "includehtml_desc":"yes",
       "subscribe":"no",
       "other2":"",
       "pending":"no",
       "description":"",
       "message":"Текст",
       "who_add":"Dmitry_DM",
       "title":"new",
       "uto":"no",
       "includehtml_msg":"yes",
       "hgu_title":"test"
    }

Расшифровка переменных:

- `end2br_msg` – [Строка] – Статус опции «Заменять теги переноса на `<br />`» для полного описания материала (yes/no)
- `comments` – [Строка] – Позволить оставлять комментарии? (yes/no)
- `add_date` – [Строка] – Время добавления материала
- `end2br_desc` – [Строка] – Статус опции «Заменять теги переноса на `<br />`» для краткого описания материала (yes/no)
- `ontop` – [Строка] – Показывать материал всегда сверху? (yes/no)
- `pending` – [Строка] – В ожидани ли активации материал? (yes/no)
- `description` – [Строка] – Краткое описание материала
- `message` – [Строка] – Полное описание материала
- `title` – [Строка] – Название материала
- `hgu_title` – [Строка] – ЧПУ материала
- `other1` – [Строка] – Дополнительное поле 1
- `other2` – [Строка] – Дополнительное поле 2
- `other3` – [Строка] – Дополнительное поле 3
- `other4` – [Строка] – Дополнительное поле 4
- `other5` – [Строка] – Дополнительное поле 5
- `meta_title` - [Строка] - Meta Title
- `meta_description` - [Строка] - Meta Description
- `meta_keywords` - [Строка] - Meta Keywords

#### [DELETE] Удалить материал

> Обязательные параметры: `id` материала

Обратите внимание, что удаление материала происходит навсегда, его возврат невозможен.

Ответ сервера не предполагает возврата данных о материале – только сообщение об операции.

Пример запроса:

    $response = $request->delete('/blog/posts', array(
        'id' => '1'
    ));

Пример ответа:

    {
       "success":{
          "msg":"Материал удалён"
       }
    }

<a name="module-blog-category"></a>
### Категории

#### [GET] Все категории

> Обязательные параметры: отсутствуют

Пример запроса:

    $response = $request->get('/blog/category', array(
        // без параметров
    ));

Пример ответа:

    [
       {
          "access2add":[
             "Все группы"
          ],
          "position":"1",
          "name":"Мои статьи",
          "description":"test",
          "access2page":[
             {
                "4":"Администраторы"
             }
          ],
          "entry_count":7,
          "id":1,
          "type":"category",
          "access2category":[
             "Все группы"
          ],
          "hgu_title":null
       },
       {
           //вывод уже другой категории, например, с ID2
       }
    ]

Расшифровка переменных ответа:

- `access2add` – [Массив] – Права на добавление материалов в категорию
- `position` – [Число] – Какой по порядку идет категория
- `name` – [Строка] – Название категории
- `description` – [Строка] – Описание категории
- `access2page` – [Массив] – Группы, имеющие возможность скачивать файлы
- `entry_count` – [Число] – Количество материалов в категории
- `id` – [Число] – ID категории
- `type` – [Строка] – Что это именно (`category`)
- `access2category` – [Массив] – Какие группы имеют доступ к просмотру категории
- `hgu_title` – [Строка] – ЧПУ категории

#### [GET] Определенную категорию

> Обязательный параметр: `id` (айди категории)

Пример запроса:

    $response = $request->get('/blog/category', array(
        'id' => 'АЙДИКАТЕГОРИИ'
    ));

Пример ответа:

    [
       {
          "access2add":[
             "Все группы"
          ],
          "position":"2",
          "name":"Категория",
          "description":"",
          "access2page":[
             {
                "4":"Администраторы"
             }
          ],
          "entry_count":0,
          "access2category":[
             "Все группы"
          ],
          "id":3,
          "type":"category",
          "hgu_title":"kategorija_v_razdele"
       }
    ]

Расшифровка переменных ответа:

- `access2add` – [Массив] – Права на добавление материалов в категорию
- `position` – [Число] – Какой по порядку идет категория
- `name` – [Строка] – Название категории
- `description` – [Строка] – Описание категории
- `access2page` – [Массив] – Группы, имеющие возможность скачивать файлы
- `entry_count` – [Число] – Количество материалов в категории
- `access2category` – [Массив] – Какие группы имеют доступ к просмотру категории
- `id` – [Число] – ID категории
- `type` – [Строка] – Что это именно (`category`)
- `hgu_title` – [Строка] – ЧПУ категории

#### [POST] Добавить категорию

> Обязательные параметры: название категории

Особенности:

1. HGU (ЧПУ) нельзя установить при добавлении категории.

Пример запроса:

    $response = $request->post('/blog/category', array(
        'name' => 'Новая категория из АПИ',
        'description' => 'Описание категории из АПИ'
    ));

Пример ответа:

    {
       "access2add":[
          {
             "4":"Администраторы"
          }
       ],
       "name":"Новая категория из АПИ",
       "position":4,
       "description":null,
       "access2page":[
          {
             "4":"Администраторы"
          }
       ],
       "entry_count":0,
       "access2category":[
          {
             "4":"Администраторы"
          }
       ],
       "id":5,
       "type":"category",
       "hgu_title":"novaja_kategorija_iz_api"
    }

Расшифровка переменных запроса:

- `access2add` – [Массив] – Права на добавление материалов в категорию
- `name` – [Строка] – Название категории
- `position` – [Число] – Какой по порядку идет категория
- `description` – [Строка] – Описание категории
- `access2page` – [Массив] – Группы, имеющие возможность скачивать файлы
- `entry_count` – [Число] – Количество материалов в категории
- `access2category` – [Массив] – Какие группы имеют доступ к просмотру категорииа
- `id` – [Число] – ID категории
- `type` – [Строка] – Что это именно (`category`)
- `hgu_title` – [Строка] – ЧПУ категории

#### [PUT] Отредактировать категорию

> Обязательные параметры: `id` категории

Пример запроса:

    $response = $request->put('/blog/category', array(
        'id' => '2',
        'name' => 'Категория с новым именем',
        'description' => 'Категория с новым описанием',
        'access2category' => '3,4',
        'hgu_title' => 'newhgu'
    ));

Пример ответа:

    {
       "access2add":[
          "Все группы"
       ],
       "name":"Категория с новым именем",
       "position":1,
       "description":"Категория с новым описанием",
       "access2page":[
          {
             "4":"Администраторы"
          }
       ],
       "entry_count":7,
       "access2category":[
          {
             "3":"Модераторы"
          },
          {
             "4":"Администраторы"
          }
       ],
       "id":1,
       "type":"category",
       "hgu_title":"newhgu"
    }

Расшифровка переменных запроса:

- `access2add` – [Массив] – Права на добавление материалов в категорию
- `name` – [Строка] – Название категории
- `position` – [Число] – Какой по порядку идет категория
- `description` – [Строка] – Описание категории
- `access2page` – [Массив] – Группы, имеющие возможность скачивать файлы
- `entry_count` – [Число] – Количество материалов в категории
- `access2category` – [Массив] – Какие группы имеют доступ к просмотру категории
- `id` – [Число] – ID категории
- `type` – [Строка] – Что это именно (`category`)
- `hgu_title` – [Строка] – ЧПУ категории

#### [DELETE] Удалить категорию

> Обязательные параметры: `id` категории

Особенности:

1. После удаления категории – обратное действие по восстановлению невозможно.

Пример запроса:

    $response = $request->delete('/blog/category', array(
        'id' => '2'
    ));

Пример ответа:

    {
       "success":{
          "msg":"Выполнено"
       }
    }

<a name="module-blog-comments"></a>
### Комментарии

#### [GET] Комментарии материала

> Обязательные параметры: `id` материала

Особенности:

1. Если комментарий является родительским, то внутри массива `messages` добавится еще один массив `messages` (массив внутри массива). Отличительной чертой будет являться переменная `parent_id`.

Пример запроса:

    $response = $request->get('/blog/comments', array(
        'id' => 'АЙДМАТЕРИАЛА'
    ));

Пример ответа:

    {
       "messages":[
          {
             "www":"",
             "answer":"",
             "avatar":"http://2093175133.uid.me/avatar.jpg",
             "author":"Dmitry",
             "pending":"no",
             "full_name":"Dmitry Kiselev",
             "message":"Мой комментарий",
             "rate":0,
             "add_date":"2015-01-16 02:06",
             "email":"",
             "rateuids":"",
             "id":34
          }, {
              //другой комментарий
          }
       ],
       "page":1,
       "pages":[
          1
       ],
       "per_page":10,
       "id":189,
       "total_msg":1
    }

    // Для особенности 1
    {
       "messages":[
          {
             "messages":[
                {
                    //информация о родительском комментарии
                   "parent_id":"34",
                   //продолжается информация о родительском комментарии
                }
             ],
             //информация о комментарии главном родителе
          },
       ],
       //информации о материале, откуда запрошен комментарий
    }

Расшифровка переменных:

- `messages` – [Массив] – Первый полученный комментарий
- `www` – [Строка] – Поле "WWW"
- `answer` – [Строка] – Ответ для комментария
- `avatar` – [Строка] – Ссылка на аватар пользователя, оставившего комментарий
- `author` – [Строка] – Никнейм пользователя, оставившего комментарий
- `pending` – [Строка] – Комментарий в ожидании модерации? (yes/no)
- `full_name` – [Строка] – Полное имя, добавившего комментарий
- `message` – [Строка] – Текст комментария
- `rate` – [Число] – Текущий рейтинг комментария
- `add_date` – [Строка] – Дата добавления комментария
- `email` – [Строка] – Поле "Email"
- `rateuids` – [Строка] –
- `id` – [Число] – ID добавленного комментария
- `parent_id` – [Число] – Если комментарий родительский, выводит ID родителя
- `page` – [Число] – Количество страниц комментариев
- `pages_list` – [Массив] – Возможные страницы в переключателе комментариев
- `per_page` – [Число] – Количество комментариев на 1 страницу
- `id` – [Число] – ID материала, откуда были запрошены комментарии
- `total_msg` – [Число] – Общее количество комментариев к материалу

#### [POST] Добавить комментарий

> Обязательные параметры: ID материала, текст комментария

Пример запроса:

    $response = $request->post('/blog/comments', array(
        'entry_id' => '189',
        'message' => 'Комментарий из API'
    ));

Пример ответа:

    {
       "add_date":"2015-01-16 02:35",
       "entry_link":"http://yoursite.ucoz.ru/blog/3-1-0-189",
       "pending":"no",
       "author":"Dmitry",
       "full_name":null,
       "entry_id":38,
       "message":"Комментарий из API"
    }

Расшифровка переменных:

- `add_date` – [Строка] – Дата добавления комментария
- `entry_link` – [Строка] – Ссылка на страницу материала, куда был добавлен комментарий
- `pending` – [Строка] – Комментарий в ожидании модерации? (yes/no)
- `author` – [Строка] – Никнейм пользователя, оставившего комментарий
- `full_name` – [Строка] – Полное имя, добавившего комментарий
- `entry_id` – [Число] – ID материала, где был добавлен комментарий
- `message` – [Строка] – Текст комментария

#### [PUT] Редактор комментария

> Обязательные параметры: ID категории/раздела

Особенности:

1. Из родительского комментария нельзя сделать главный комментарий (то есть конвертация или удаление вложенности невозможно).

Пример запроса:

    $response = $request->put('/blog/comments', array(
        'id' => '36',
        'message' => 'Комментарий из API'
    ));

Пример ответа:

    {
       "add_date":"2015-01-16 02:20",
       "who_add":"uapitest003",
       "author":"uapitest003 uapitest003",
       "pending":"no",
       "id":36,
       "message":"Комментарий из API"
    }

Расшифровка переменных:

- `add_date` – [Строка] – Дата добавления комментария
- `who_add` – [Строка] – Никнейм пользователя, оставившего комментарий
- `author` – [Строка] – Никнейм пользователя, оставившего комментарий
- `pending` – [Строка] – Комментарий в ожидании модерации? (yes/no)
- `id` – [Число] – ID добавленного комментария

#### [DELETE] Удалить комментарий

> Обязательные параметры: ID комментария

Особенности:

1. Отменить действие "Удалить" невозможно.
1. Если у комментария есть родительские комментарии – они удалены автоматически не будут, дерево комментариев перестроится.

Пример запроса:

    $response = $request->delete('/blog/comments', array(
        'id' => '2'
    ));

Пример ответа:

    {
       "success":{
          "msg":"Сообщение удалено"
       }
    }

<a name="module-blog-fields"></a>
### Настройки полей

#### [GET] Настройки полей модуля

> Обязательные параметры: отсутствуют.
>
> Запрос показывает, какие поля доступны при добавлении и редактировании материала.

Особенности:

1. Ответ строится исходя из настроек в Панели управления: Блог -> Настройки модуля -> Поля для добавления материалов

Пример запроса:

    $response = $request->get('/blog/fields', array(
        // без параметров
    ));

Пример ответа:

    [
       {
          "checked":"no",
          "required":"no",
          "name":"Дополнительное поле 4"
       },
       {
          "checked":"yes",
          "required":"yes",
          "name":"Краткое описание материала"
       },
       {
          "checked":"yes",
          "required":"yes",
          "name":"Название материала"
       },
       {
          "checked":"no",
          "required":"no",
          "name":"Дополнительное поле 3"
       },
       {
          "checked":"yes",
          "required":"yes",
          "name":"Полный текст материала"
       },
       {
          "checked":"yes",
          "required":"no",
          "name":"Изображения"
       },
       {
          "checked":"no",
          "required":"no",
          "name":"Дополнительное поле 5"
       },
       {
          "checked":"no",
          "required":"no",
          "name":"Дополнительное поле 1"
       },
       {
          "checked":"yes",
          "required":"no",
          "name":"Извещения о комментариях"
       },
       {
          "checked":"no",
          "required":"no",
          "name":"Дополнительное поле 2"
       }
    ]

Расшифровка переменных ответа:

- `checked` – [Строка] – Доступно ли поле при добавлении/редактировании материала? (yes/no)
- `required` – [Строка] – Является ли поле при добавлении/редактировании материала обязательным? (yes/no)
- `name` – [Строка] – Название поля
